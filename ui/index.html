<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Blueprint Generator</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header section -->
        <header class="header">
            <h1>3D Blueprint Generator</h1>
            <div class="actions">
                <button id="generate-btn" class="primary-btn">
                    <span class="material-icons">autorenew</span>
                    Generate Blueprint
                </button>
                <a href="/api/blueprint/visualize" target="_blank" class="secondary-btn">
                    <span class="material-icons">view_in_ar</span>
                    View in 3D
                </a>
            </div>
        </header>

        <!-- Main content -->
        <main class="content">
            <div class="content-container">
                <!-- Left sidebar - Controls -->
                <div class="sidebar">
                    <div class="control-section">
                        <h3>Floor Navigation</h3>
                        <div class="floor-navigator">
                            <button id="floor-up" class="icon-btn">
                                <span class="material-icons">arrow_upward</span>
                            </button>
                            <div id="current-floor" class="floor-indicator">Floor 0</div>
                            <button id="floor-down" class="icon-btn">
                                <span class="material-icons">arrow_downward</span>
                            </button>
                        </div>
                    </div>

                    <div class="control-section">
                        <h3>View Controls</h3>
                        <div class="toggle-buttons">
                            <button id="toggle-room-labels" class="toggle-btn active" title="Show/Hide Room Labels">
                                <span class="material-icons">label</span>
                                Room Labels
                            </button>
                            <button id="toggle-object-labels" class="toggle-btn" title="Show/Hide Object Labels">
                                <span class="material-icons">chair</span>
                                Object Labels
                            </button>
                            <button id="toggle-dimensions" class="toggle-btn" title="Show/Hide Dimensions">
                                <span class="material-icons">straighten</span>
                                Dimensions
                            </button>
                            <button id="toggle-unit-system" class="toggle-btn" title="Toggle between Metric/Imperial">
                                <span class="material-icons">swap_horiz</span>
                                <span id="unit-display">Metric</span>
                            </button>
                        </div>

                        <div class="view-buttons">
                            <button id="standard-view" class="view-btn active" title="Standard View">
                                <span class="material-icons">home</span>
                                Standard
                            </button>
                            <button id="measurement-view" class="view-btn" title="Measurement View">
                                <span class="material-icons">square_foot</span>
                                Measurement
                            </button>
                            <button id="furniture-view" class="view-btn" title="Furniture View">
                                <span class="material-icons">weekend</span>
                                Furniture
                            </button>
                        </div>
                    </div>

                    <!-- Room details panel (shown when a room is selected) -->
                    <div id="room-details" class="room-details">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Main canvas area -->
                <div class="canvas-container">
                    <canvas id="blueprint-canvas"></canvas>

                    <!-- Help overlay with keyboard shortcuts and mouse controls -->
                    <div id="controls-help" class="controls-help">
                        <div class="controls-help-content">
                            <h4>Controls</h4>
                            <ul>
                                <li><strong>Pan:</strong> Click and drag</li>
                                <li><strong>Zoom:</strong> Mouse wheel</li>
                                <li><strong>Select:</strong> Click on rooms</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Loading spinner -->
                    <div id="loading-spinner" class="spinner-overlay">
                        <div class="spinner"></div>
                        <p class="message">Loading...</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Status message display -->
        <div id="status-message" class="status-message"></div>

        <!-- Footer -->
        <footer class="footer">
            <p>3D Blueprint Generator - Home Assistant Add-on</p>
            <div class="footer-links">
                <a href="/api/blueprint/visualize" target="_blank">3D View</a>
                <a href="/api/health" target="_blank">API Status</a>
            </div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="app.js"></script>
</body>
</html>
